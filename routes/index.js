
//#################################################################################################
const {Router}  = require('express')
const router    = Router()
//#################################################################################################


//#################################################################################################
let index = async(req, res, next)=> {

    if(res.statusCode != 503)
    {
        res.bodyResponse = {api:process.env.Api_Nombre}
        res.statusCode = 200
        next()
    }
}
//#################################################################################################
let login = async (req, res, next)=>{

    let login_usu  = req.body.data.substr(0,64)
    let passw_usu  = req.body.data.substr(64)

    console.log(login_usu)
    console.log(passw_usu)

    let {login} = require('../procedures/auth')
    let resultado = await login(login_usu, passw_usu)

    res = Object.assign(res, resultado)
    return next()
}
//#################################################################################################


//#################################################################################################
router.get('/',index) 
router.post('/',login) 
//#################################################################################################


//#################################################################################################
module.exports = router
//#################################################################################################